define("block_floatingbutton/iconpicker",["exports","core/notification","core/templates","core/modal","block_floatingbutton/iconset"],(function(_exports,_notification,_templates,_modal,_iconset){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_modal=_interopRequireDefault(_modal),_iconset=_interopRequireDefault(_iconset);const SELECTORS_iconpicker=".block_floatingbutton-iconpicker",SELECTORS_iconpicker_input=".block_floatingbutton-input input",SELECTORS_iconpicker_search_input=".block_floatingbutton-iconpicker-search-input",SELECTORS_iconpicker_icon=".block_floatingbutton-iconpicker-icon";_exports.init=iconpickerclass=>{_iconset.default.forEach((function(v,i){v.index=i})),Array.from(document.querySelectorAll(SELECTORS_iconpicker_input)).forEach((function(input){input.setAttribute("style","visibility: collapse; width: 0; margin: 0; padding: 0; position: absolute;"),input.insertAdjacentHTML("afterend",'<button class="'+iconpickerclass+' btn btn-secondary btn-icon" type="button" id="'+input.name+'_button" data-iconpicker-input="'+input.name+'"><i class="'+input.value+'"></i></button>')})),Array.from(document.querySelectorAll("."+iconpickerclass)).forEach((function(picker){picker.addEventListener("click",(function(event){let target=event.target.closest("."+iconpickerclass);buildModal(target.id,target.getAttribute("data-iconpicker-input"))}))}))};const buildModal=async(target,input)=>{try{const{html:html}=await _templates.default.renderForPromise("block_floatingbutton/iconpicker",{target:target,input:input,icons:_iconset.default}),modal=await _modal.default.create({title:"Icon picker",body:html,footer:""});modal.getRoot().on("modal:shown",(function(event){const iconpicker=event.target.querySelector(SELECTORS_iconpicker);iconpicker.querySelector(SELECTORS_iconpicker_search_input).addEventListener("input",searchicon);Array.from(iconpicker.querySelectorAll(SELECTORS_iconpicker_icon)).forEach((function(icon){icon.addEventListener("click",(e=>{!function(event){let modal=event.target.closest(SELECTORS_iconpicker),target=modal.getAttribute("data-iconpicker"),input=modal.getAttribute("data-iconpicker-input");if(target){let icondiv=event.target.closest(SELECTORS_iconpicker_icon),iconclass=document.querySelector("#"+icondiv.id+" i").classList;document.getElementById(target).innerHTML='<i class="'+iconclass+'"></i>',document.querySelector('[name="'.concat(input,'"]')).setAttribute("value",iconclass)}highlightselected()}(e),modal.hide()}))}))})),modal.show(),highlightselected()}catch(ex){(0,_notification.exception)(ex)}};function searchicon(event){let modal=event.target.closest(SELECTORS_iconpicker),search=event.target.closest(SELECTORS_iconpicker_search_input);Array.from(modal.querySelectorAll(SELECTORS_iconpicker_icon)).forEach((function(icon){icon.getAttribute("data-search").includes(search.value)?icon.setAttribute("style",""):icon.setAttribute("style","display: none;")}))}function highlightselected(){let icons=Array.from(document.getElementsByClassName(SELECTORS_iconpicker_icon)),input=document.querySelector(SELECTORS_iconpicker).getAttribute("data-iconpicker-input");if(null!==input){let iconclass=document.querySelector('[name="'.concat(input,'"]')).getAttribute("value");icons.forEach((function(icondiv){icondiv.classList.remove("highlight"),icondiv.querySelector("i").classList==iconclass&&icondiv.classList.add("highlight")}))}}}));

//# sourceMappingURL=iconpicker.min.js.map