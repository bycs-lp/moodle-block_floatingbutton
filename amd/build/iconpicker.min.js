define("block_floatingbutton/iconpicker",["exports","core/notification","core/templates","block_floatingbutton/iconset"],(function(_exports,_notification,_templates,_iconset){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_iconset=_interopRequireDefault(_iconset);function searchicon(event){let modal=event.target.closest(".block_floatingbutton-iconpicker"),search=event.target.closest(".block_floatingbutton-iconpicker-search-input");Array.from(modal.querySelectorAll(".block_floatingbutton-iconpicker-icon")).forEach((function(icon){icon.getAttribute("data-search").includes(search.value)?icon.setAttribute("style",""):icon.setAttribute("style","display: none;")}))}function highlightselected(){let icons=Array.from(document.getElementsByClassName("block_floatingbutton-iconpicker-icon")),input=document.querySelector(".block_floatingbutton-iconpicker").getAttribute("data-iconpicker-input");if(null!==input){let iconclass=document.querySelector('[name="'.concat(input,'"]')).getAttribute("value");icons.forEach((function(icondiv){icondiv.classList.remove("highlight"),icondiv.querySelector("i").classList==iconclass&&icondiv.classList.add("highlight")}))}}_exports.init=iconpickerclass=>{_iconset.default.forEach((function(v,i){v.index=i})),Array.from(document.querySelectorAll(".block_floatingbutton-input input")).forEach((function(input){input.setAttribute("style","visibility: collapse; width: 0; margin: 0; padding: 0; position: absolute;"),input.insertAdjacentHTML("afterend",'<button class="'+iconpickerclass+' btn btn-secondary btn-icon" type="button" id="'+input.name+'_button" data-iconpicker-input="'+input.name+'"><i class="'+input.value+'"></i></button>')})),Array.from(document.querySelectorAll("."+iconpickerclass)).forEach((function(picker){picker.addEventListener("click",(function(event){let target=event.target.closest("."+iconpickerclass);!function(target,input){_templates.default.renderForPromise("block_floatingbutton/iconpicker",{target:target,input:input,icons:_iconset.default}).then((_ref=>{let{html:html}=_ref;return require(["jquery","core/modal_factory"],(function($,ModalFactory){var trigger=$("#create-modal");ModalFactory.create({title:"Icon picker",body:html,footer:""},trigger).done((function(modal){modal.getRoot().on("modal:shown",(function(event){let iconpicker=event.target.querySelector(".block_floatingbutton-iconpicker");iconpicker.querySelector(".block_floatingbutton-iconpicker-search-input").addEventListener("input",searchicon),Array.from(iconpicker.querySelectorAll(".block_floatingbutton-iconpicker-icon")).forEach((function(icon){icon.addEventListener("click",(e=>{!function(event){let modal=event.target.closest(".block_floatingbutton-iconpicker"),target=modal.getAttribute("data-iconpicker"),input=modal.getAttribute("data-iconpicker-input");if(target){let icondiv=event.target.closest(".block_floatingbutton-iconpicker-icon"),iconclass=document.querySelector("#"+icondiv.id+" i").classList;document.getElementById(target).innerHTML='<i class="'+iconclass+'"></i>',document.querySelector('[name="'.concat(input,'"]')).setAttribute("value",iconclass)}highlightselected()}(e),modal.hide()}))}))})),modal.show(),highlightselected()}))})),!0})).catch((ex=>(0,_notification.exception)(ex)))}(target.id,target.getAttribute("data-iconpicker-input"))}))}))}}));

//# sourceMappingURL=iconpicker.min.js.map