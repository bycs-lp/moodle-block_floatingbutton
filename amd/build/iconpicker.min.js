define("block_floatingbutton/iconpicker",["exports","core/notification","core/templates","block_floatingbutton/iconset"],(function(_exports,_notification,_templates,_iconset){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var iconpickermodal;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_iconset=_interopRequireDefault(_iconset);function highlightselected(){let icons=Array.from(document.getElementsByClassName("mbs-iconpicker-icon")),input=document.querySelector(".mbs-iconpicker").getAttribute("data-icon-input");if(null!==input){let iconclass=document.getElementById(input).getAttribute("value");icons.forEach((function(icondiv){icondiv.classList.remove("highlight"),icondiv.querySelector("i").classList==iconclass&&icondiv.classList.add("highlight")}))}}function iconclick(event){let id=document.querySelector(".mbs-iconpicker").getAttribute("data-iconpicker"),input=document.querySelector(".mbs-iconpicker").getAttribute("data-icon-input");if(id){let icondiv=event.target;"DIV"!=event.target.nodeName&&(icondiv=event.target.parentNode);let iconclass=document.querySelector("#"+icondiv.id+" i").classList;document.getElementById(id).innerHTML='<i class="'+iconclass+'"></i>',document.getElementById(input).setAttribute("value",iconclass)}highlightselected(),iconpickermodal.hide()}_exports.init=(iconpickerdiv,iconpickerselector)=>{_iconset.default.forEach((function(v,i){v.index=i}));var clickSet=!1;Array.from(document.querySelectorAll(".mbs-floatingicon-input input")).forEach((function(input){input.setAttribute("style","visibility: collapse; width: 0; margin: 0; padding: 0; position: absolute;"),input.insertAdjacentHTML("afterend",'<button class="mbs-floatingicons-iconpicker" type="button" id="'+input.id+'_button" data-icon-input="'+input.id+'"><i class="'+input.value+'"></i></button>')})),Array.from(document.querySelectorAll(iconpickerselector)).forEach((function(picker){picker.addEventListener("click",(function(){iconpickermodal.show(),document.querySelector(".mbs-iconpicker").setAttribute("data-iconpicker",picker.id),document.querySelector(".mbs-iconpicker").setAttribute("data-icon-input",picker.getAttribute("data-icon-input")),highlightselected()}))})),_templates.default.renderForPromise("block_floatingbutton/iconpicker",{icons:_iconset.default}).then((_ref=>{let{html:html}=_ref;return require(["jquery","core/modal_factory"],(function($,ModalFactory){var trigger=$("#create-modal");ModalFactory.create({title:"Icon picker",body:html,footer:""},trigger).done((function(modal){iconpickermodal=modal,modal.getRoot().on("modal:shown",(function(){if(!clickSet){let search=document.querySelector("#mbs-iconpicker-search");search.addEventListener("input",(function(){Array.from(document.querySelectorAll(".mbs-iconpicker-icon")).forEach((function(icon){icon.getAttribute("data-search").includes(search.value)?icon.setAttribute("style",""):icon.setAttribute("style","display: none;")}))})),Array.from(document.querySelectorAll(".mbs-iconpicker-icon")).forEach((function(icon){icon.addEventListener("click",iconclick)})),clickSet=!0}}))}))})),!0})).catch((ex=>(0,_notification.exception)(ex)))}}));

//# sourceMappingURL=iconpicker.min.js.map