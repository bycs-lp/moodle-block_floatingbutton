define ("block_floatingbutton/iconpicker",["exports","core/notification","core/templates","block_floatingbutton/iconset"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var h,i=function(a,e){d.default.forEach(function(a,b){a.index=b});var i=!1,j=Array.from(document.querySelectorAll(".mbs-floatingicon-input input"));j.forEach(function(a){a.setAttribute("style","display:none;");a.insertAdjacentHTML("afterend","<button class=\"mbs-floatingicons-iconpicker\" type=\"button\" id=\""+a.id+"_button\" data-icon-input=\""+a.id+"\"><i class=\""+a.value+"\"></i></button>")});var k=Array.from(document.querySelectorAll(e));k.forEach(function(a){a.addEventListener("click",function(){h.show();document.querySelector(".mbs-iconpicker").setAttribute("data-iconpicker",a.id);document.querySelector(".mbs-iconpicker").setAttribute("data-icon-input",a.getAttribute("data-icon-input"));f()})});c.default.renderForPromise("block_floatingbutton/iconpicker",{icons:d.default}).then(function(a){var b=a.html;require(["jquery","core/modal_factory"],function(a,c){var d=a("#create-modal");c.create({title:"Icon picker",body:b,footer:""},d).done(function(a){h=a;a.getRoot().on("modal:shown",function(){if(!i){var a=document.querySelector("#mbs-iconpicker-search");a.addEventListener("input",function(){var b=Array.from(document.querySelectorAll(".mbs-iconpicker-icon"));b.forEach(function(b){if(b.getAttribute("data-search").includes(a.value)){b.setAttribute("style","")}else{b.setAttribute("style","display: none;")}})});var b=Array.from(document.querySelectorAll(".mbs-iconpicker-icon"));b.forEach(function(a){a.addEventListener("click",g)});i=!0}})})});return!0}).catch(function(a){return(0,b.exception)(a)})};a.init=i;function f(){var a=Array.from(document.getElementsByClassName("mbs-iconpicker-icon")),b=document.querySelector(".mbs-iconpicker").getAttribute("data-icon-input");if(!(null===b)){var c=document.getElementById(b).getAttribute("value");a.forEach(function(a){a.classList.remove("highlight");if(a.querySelector("i").classList==c){a.classList.add("highlight")}})}}function g(a){var b=document.querySelector(".mbs-iconpicker").getAttribute("data-iconpicker"),c=document.querySelector(".mbs-iconpicker").getAttribute("data-icon-input");if(b){var d=a.target;if("DIV"!=a.target.nodeName){d=a.target.parentNode}var e=document.querySelector("#"+d.id+" i").classList;document.getElementById(b).innerHTML="<i class=\""+e+"\"></i>";document.getElementById(c).setAttribute("value",e)}f();h.hide()}});
//# sourceMappingURL=iconpicker.min.js.map
