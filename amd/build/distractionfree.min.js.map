{"version":3,"file":"distractionfree.min.js","sources":["../src/distractionfree.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggles distraction-free mode.\n *\n * @module     block_floatingbutton/distractionfree\n * @copyright  2025 ISB Bayern\n * @author     Stefan Hanauska <stefan.hanauska@csg-in.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = (name) => {\n    let button = document.getElementById(name);\n    button.addEventListener('click', () => {\n        const state = sessionStorage.getItem('block_floatingbutton-distraction-free-button-state');\n        if (state === 'true') {\n            showDistractions();\n            sessionStorage.setItem('block_floatingbutton-distraction-free-button-state', 'false');\n        } else {\n            hideDistractions();\n            sessionStorage.setItem('block_floatingbutton-distraction-free-button-state', 'true');\n        }\n    });\n    const state = sessionStorage.getItem('block_floatingbutton-distraction-free-button-state');\n    if (state === 'true') {\n        hideDistractions();\n    }\n};\n\n/**\n * Hides distractions on the page.\n */\nfunction hideDistractions() {\n    let selectors = ['nav.fixed-top', 'header', '#nav-drawer',\n        '#group_menu', 'blocks-column', '.activity-navigation',\n        '.drawer-left-toggle', '.drawer-right-toggle', 'footer',\n        '#page-header', '.secondary-navigation', 'bycs-topbar', '.mbscontentheader'\n    ];\n    let drawers = ['left', 'right'];\n    drawers.forEach((s) => {\n        const showdrawer = document.querySelector(`#page.show-drawer-${s}`);\n        if (showdrawer) {\n            const toggles = document.querySelectorAll(`.drawertoggle[data-action=\"closedrawer\"]`);\n            if (toggles) {\n                toggles.forEach((toggle) => toggle.click());\n            } else {\n                selectors.push(`.drawer-${s}`);\n            }\n        }\n    });\n    selectors.forEach((s) => {\n        const els = document.querySelectorAll(s);\n        els.forEach((el) => {\n            el.classList.add('block_floatingbutton-hidden');\n        });\n    });\n    selectors = ['#page', '#topofscroll'];\n    selectors.forEach((s) => {\n        const els = document.querySelectorAll(s);\n        els.forEach((el) => {\n            el.classList.add('block_floatingbutton-nopadding');\n        });\n    });\n}\n\n/**\n * Shows distractions on the page.\n */\nfunction showDistractions() {\n    const els = document.querySelectorAll('.block_floatingbutton-hidden, .block_floatingbutton-nopadding');\n    els.forEach((el) => {\n        el.classList.remove('block_floatingbutton-hidden');\n        el.classList.remove('block_floatingbutton-nopadding');\n    });\n}\n"],"names":["hideDistractions","selectors","forEach","s","document","querySelector","toggles","querySelectorAll","toggle","click","push","el","classList","add","name","getElementById","addEventListener","sessionStorage","getItem","remove","setItem"],"mappings":"oKA6CSA,uBACDC,UAAY,CAAC,gBAAiB,SAAU,cACxC,cAAe,gBAAiB,uBAChC,sBAAuB,uBAAwB,SAC/C,eAAgB,wBAAyB,cAAe,qBAE9C,CAAC,OAAQ,SACfC,SAASC,OACMC,SAASC,0CAAmCF,IAC/C,OACNG,QAAUF,SAASG,6DACrBD,QACAA,QAAQJ,SAASM,QAAWA,OAAOC,UAEnCR,UAAUS,uBAAgBP,QAItCF,UAAUC,SAASC,IACHC,SAASG,iBAAiBJ,GAClCD,SAASS,KACTA,GAAGC,UAAUC,IAAI,qCAGzBZ,UAAY,CAAC,QAAS,gBACtBA,UAAUC,SAASC,IACHC,SAASG,iBAAiBJ,GAClCD,SAASS,KACTA,GAAGC,UAAUC,IAAI,sDAjDRC,OACJV,SAASW,eAAeD,MAC9BE,iBAAiB,SAAS,KAEf,SADAC,eAAeC,QAAQ,uDAuD7Bd,SAASG,iBAAiB,iEAClCL,SAASS,KACTA,GAAGC,UAAUO,OAAO,+BACpBR,GAAGC,UAAUO,OAAO,qCAvDhBF,eAAeG,QAAQ,qDAAsD,WAE7EpB,mBACAiB,eAAeG,QAAQ,qDAAsD,YAIvE,SADAH,eAAeC,QAAQ,uDAEjClB"}